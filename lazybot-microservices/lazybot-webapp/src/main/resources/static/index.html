<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Panel bots</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <!-- Bulma Version 0.8.x-->
    <link rel="stylesheet" href="https://unpkg.com/bulma@0.8.0/css/bulma.min.css"/>
    <link rel="stylesheet" type="text/css" href="../css/admin.css">
    <!-- Place your kit's code here -->
    <script src="https://kit.fontawesome.com/66080bc632.js" crossorigin="anonymous"></script>
    <link href="https://kit-free.fontawesome.com/releases/latest/css/free-v4-shims.min.css" media="all"
          rel="stylesheet">
    <link href="https://kit-free.fontawesome.com/releases/latest/css/free-v4-font-face.min.css" media="all"
          rel="stylesheet">
    <link href="https://kit-free.fontawesome.com/releases/latest/css/free.min.css" media="all" rel="stylesheet">
</head>

<body>

<!-- START NAV -->
<nav class="navbar is-white">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item brand-text" href="../index.html">
                Panel bots
            </a>
            <div class="navbar-burger burger" data-target="navMenu">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div id="navMenu" class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item" href="admin.html">
                    Home
                </a>
                <a class="navbar-item" href="admin.html">
                    Orders
                </a>
                <a class="navbar-item" href="admin.html">
                    Payments
                </a>
                <a class="navbar-item" href="admin.html">
                    Exceptions
                </a>
                <a class="navbar-item" href="admin.html">
                    Reports
                </a>
            </div>

        </div>
    </div>
</nav>
<!-- END NAV -->
<div class="container">
    <div class="columns">
        <div class="column is-3">
            <aside class="menu is-hidden-mobile">
                <p class="menu-label">
                    General
                </p>
                <ul class="menu-list">
                    <li><a class="is-active">Dashboard</a></li>
                    <li><a>Customers</a></li>
                    <li><a>Other</a></li>
                </ul>
                <p class="menu-label">
                    Administration
                </p>
                <ul class="menu-list">
                    <li><a>Team Settings</a></li>
                    <li>
                        <a>Manage Your Team</a>
                        <ul>
                            <li><a>Members</a></li>
                            <li><a>Plugins</a></li>
                            <li><a>Add a member</a></li>
                            <li><a>Remove a member</a></li>
                        </ul>
                    </li>
                    <li><a>Invitations</a></li>
                    <li><a>Cloud Storage Environment Settings</a></li>
                    <li><a>Authentication</a></li>
                    <li><a>Payments</a></li>
                </ul>
                <p class="menu-label">
                    Transactions
                </p>
                <ul class="menu-list">
                    <li><a>Payments</a></li>
                    <li><a>Transfers</a></li>
                    <li><a>Balance</a></li>
                    <li><a>Reports</a></li>
                </ul>
            </aside>
        </div>
        <div class="column is-9">
            <nav class="breadcrumb" aria-label="breadcrumbs">
                <ul>
                    <li><a href="../">Bulma</a></li>
                    <li><a href="../">Templates</a></li>
                    <li><a href="../">Examples</a></li>
                    <li class="is-active"><a href="#" aria-current="page">Admin</a></li>
                </ul>
            </nav>
            <section class="hero is-info welcome is-small">
                <div class="hero-body">
                    <div class="container">
                        <h1 class="title">
                            Hello, Admin.
                        </h1>
                        <h2 class="subtitle">
                            I hope you are having a great day!
                        </h2>
                    </div>
                </div>
            </section>
            <section class="info-tiles">
                <div class="tile is-ancestor has-text-centered">
                    <div class="tile is-parent">
                        <article class="tile is-child box">
                            <p class="title"><span id="botXPos">0</span> ; <span id="botZPos">0</span></p>
                            <p class="subtitle">Position</p>
                        </article>
                    </div>
                    <div class="tile is-parent">
                        <article class="tile is-child box">
                            <p class="title">32/60</p>
                            <p class="subtitle">Inventory slots</p>
                        </article>
                    </div>
                    <div class="tile is-parent">
                        <article class="tile is-child box">
                            <p class="title"><span id="healthValue">20</span>/20</p>
                            <p class="subtitle">Health</p>
                        </article>
                    </div>
                    <div class="tile is-parent">
                        <article class="tile is-child box">
                            <p class="title"><span id="foodValue">20</span>/20</p>
                            <p class="subtitle">Food</p>
                        </article>
                    </div>
                </div>
            </section>
            <div class="columns">
                <div class="column is-6">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Go to pos
                            </p>
                            <a href="#" class="card-header-icon" aria-label="more options">
                  <span class="icon">
                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                  </span>
                            </a>
                        </header>
                        <div class="card-content">
                            <div class="content">
                                <div class="field has-addons">
                                    <div class="control">
                                        <label for="xPos">
                                            <input class="input is-large" type="text" placeholder="X" id="xPos">
                                        </label>
                                    </div>
                                    <div class="control">
                                        <label for="yPos">
                                            <input class="input is-large" type="text" placeholder="Y" id="yPos">
                                        </label>
                                    </div>
                                    <div class="control is-expanded">
                                        <label for="zPos">
                                            <input class="input is-large" type="text" placeholder="Z" id="zPos">
                                        </label>
                                    </div>

                                    <div class="control">
                                        <button type="button" onclick="goToPos()" class="button is-large is-gray">
                                            <span class="icon is-medium is-left">
                      <i class="fas fa-running"></i>
                    </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Go to pos
                            </p>
                            <a href="#" class="card-header-icon" aria-label="more options">
                  <span class="icon">
                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                  </span>
                            </a>
                        </header>
                        <div class="card-content">
                            <div class="content">
                                <div class="control has-icons-left has-icons-right">
                                    <input class="input is-large" type="text" placeholder="">
                                    <span class="icon is-medium is-left">
                      <i class="fa fa-search"></i>
                    </span>
                                    <span class="icon is-medium is-right">
                      <i class="fa fa-check"></i>
                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column is-6">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Message
                            </p>
                            <a href="#" class="card-header-icon" aria-label="more options">
                  <span class="icon">
                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                  </span>
                            </a>
                        </header>
                        <div class="card-content">
                            <div class="content">
                                <div class="field has-addons">
                                    <div class="control is-expanded">
                                        <label for="myMessage">
                                            <input class="input is-large" type="text" placeholder="Tapez le message..."
                                                   id="myMessage">
                                        </label>
                                    </div>

                                    <div class="control">
                                        <button type="button" onclick="sendMessage()" class="button is-large is-gray">
                                            <span class="icon is-medium is-left">
                      <i class="fa fa-search"></i>
                    </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                User Search
                            </p>
                            <a href="#" class="card-header-icon" aria-label="more options">
                  <span class="icon">
                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                  </span>
                            </a>
                        </header>
                        <div class="card-content">
                            <div class="content">
                                <div class="control has-icons-left has-icons-right">
                                    <input class="input is-large" type="text" placeholder="">
                                    <span class="icon is-medium is-left">
                      <i class="fa fa-search"></i>
                    </span>
                                    <span class="icon is-medium is-right">
                      <i class="fa fa-check"></i>
                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script async type="text/javascript" src="../js/bulma.js"></script>

<script src="../js/socket.io-2.2.0.js"></script>
<script>
    var ioClient = io.connect('http://localhost:8090/');
    let lastHealthValue = 20;

    function getChunk() {
        ioClient.emit('getChunk', 5);
    }

    function sendMessage() {
        let message = document.getElementById("myMessage").value;
        if (message !== '') {
            ioClient.emit('sendMessage', message);
            document.getElementById("myMessage").value = '';
        }
    }

    function goToPos() {
        let x = parseInt(document.getElementById("xPos").value);
        let y = parseInt(document.getElementById("yPos").value);
        let z = parseInt(document.getElementById("zPos").value);
        var jsonObject = {x: x, y: y, z: z};
        ioClient.emit('goToPos', jsonObject);
        document.getElementById("xPos").value = '';
        document.getElementById("yPos").value = '';
        document.getElementById("zPos").value = '';
    }

    ioClient.on("updateBot", function (bot) {
        document.getElementById("healthValue").innerHTML = bot.health;
        document.getElementById("foodValue").innerHTML = bot.food;
        document.getElementById("botXPos").innerHTML = bot.position.x;
        document.getElementById("botZPos").innerHTML = bot.position.z;
        colorizeHealth(lastHealthValue, bot.health);
        lastHealthValue = bot.health;
    });

    function colorizeHealth(lastHealth, health) {
        if (lastHealthValue > health) {
            document.getElementById("healthValue").style.color = "#ff0000";
        }
        if (lastHealthValue > health) {
            setTimeout(function () {
                document.getElementById("healthValue").style.color = "#000000";
            }, 500);
        }
    }
</script>
</body>

</html>
